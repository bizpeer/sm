<%- include('partials/header') %>

    <section>
        <div class="section-title">
            <h2>제품문의</h2>
            <p>원하시는 제품에 대해 상세히 문의해 주세요. 최대한 빠르게 답변드리겠습니다.</p>
        </div>

        <div class="inquiry-form">
            <form action="/api/inquiry" method="POST">
                <div class="form-group">
                    <label for="name">이름</label>
                    <input type="text" id="name" name="name" placeholder="성함을 입력해주세요." required>
                </div>
                <div class="form-group">
                    <label for="contact">연락처 (Email 혹은 전화번호)</label>
                    <input type="text" id="contact" name="contact" placeholder="연락받으실 정보를 입력해주세요." required>
                </div>
                <div class="form-group">
                    <label for="message">문의사항</label>
                    <textarea id="message" name="message" placeholder="문의하실 내용을 상세히 적어주세요. (최소 5문단 이상 권장)"
                        required></textarea>
                </div>
                <% if(locals.product) { %>
                    <input type="hidden" name="product" value="<%= product %>">
                    <p style="margin-bottom: 1rem; color: var(--accent);"><strong>문의 제품: <%= product %></strong></p>
                    <% } %>
                        <button type="submit" class="submit-btn" id="submitBtn">문의 제출하기</button>
            </form>
        </div>
    </section>

    <script>
        // GitHub Pages static simulation logic
        if (location.hostname.includes('github.io')) {
            document.querySelector('form').addEventListener('submit', function (e) {
                e.preventDefault();

                const name = document.getElementById('name').value;
                const contact = document.getElementById('contact').value;
                const message = document.getElementById('message').value;
                const product = <%= locals.product ? `'${product}'` : '""' %>;

                // Get existing or init
                let inquiries = JSON.parse(localStorage.getItem('sm_inquiries') || '[]');
                inquiries.push({
                    id: Date.now(),
                    date: new Date().toISOString(),
                    name,
                    contact,
                    message,
                    product
                });

                localStorage.setItem('sm_inquiries', JSON.stringify(inquiries));

                alert('인증서버가 없는 정적 환경(GitHub Pages)입니다.\n문의사항이 브라우저 로컬 저장소(localStorage)에 임시 저장되었습니다.\n관리자 페이지에서 확인하실 수 있습니다.');
                location.href = '<%= baseUrl %>/';
            });
        }
    </script>

    <%- include('partials/footer') %>